---
title: "Hammering JSON into CSV"
date: 2023-07-16T10:00:00Z
draft: false
tags: [ "json", "csv", "tool", "DotNet", "csharp" ]
categories: [ "tool" ]
images: [ "/hammer/hammer.png" ]
thumbnail: "/hammer/hammer.png"
---

_A tool to help build CSV records from arbitrary JSON..._

# Hammering JSON into CSV

I've built a simple tool to help hammer arbitrary JSON into CSV records.

* [instantiator/json-to-smart-csv](https://github.com/instantiator/json-to-smart-csv)

You're welcome to pilfer it, use it, and adapt it to your needs. If you make any modifications, do please upstream your improvements.

At the moment, you can launch it through the `json-to-smart-csv.sh` bash script.

## Prerequisites

You'll need [bash](https://www.gnu.org/software/bash/) on your system (available by default on Mac OS), and the [.NET 7.0 SDK](https://dotnet.microsoft.com/en-us/download).

## Getting started

Take a look in the [sample-data](https://github.com/instantiator/json-to-smart-csv/tree/main/sample-data) directory to get a feel for the tool.

* [sample-list.json](https://github.com/instantiator/json-to-smart-csv/blob/main/sample-data/sample-list.json) is a JSON file containing several rich objects - representing a number of fruit/vegetables found in the kitchen.
* [sample-rules.csv](https://github.com/instantiator/json-to-smart-csv/blob/main/sample-data/sample-rules.csv) defines a number of columns to create in output CSV, and how to source them from the JSON.
* [sample-out.csv](https://github.com/instantiator/json-to-smart-csv/blob/main/sample-data/sample-out.csv) is the output generated by the tool.

![sample output](/hammer/sample-out.csv.png "Sample output CSV file showing a record for each fruit-or-vegetable")

You can regenerate the test output by running the [test-sample.sh](https://github.com/instantiator/json-to-smart-csv/blob/main/test-sample.sh) script.

As you can see from the script, it provides these arguments to `json-to-smart-csv.sh`:

* `-c sample-data/sample-rules.csv` - indicating the CSV file to find column definitions in
* `-s sample-data/sample-list.json` - indicating the source data JSON file
* `-t sample-data/sample-out.csv` - indicating the target file to put the results

By default it runs in `Create` mode - but you can switch it to append to the target file by adding the `-m Append` option.

## Future work

At the moment, this tool relies on the presence of the .NET SDK and bash. It would be nice to bundle it up into a binary and distribute through the standard package managers. I'll look into that.

Other than that, it's about as feature-complete as I need it to be. If you want to improve on it, you're very welcome to do so - and do please upstream your changes.
